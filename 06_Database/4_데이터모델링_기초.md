# 4. 데이터 모델링 기초

## 테이블 잘 만들기

### 정규화 Normalization

- 정규화
    - 데이터베이스의 데이터를 체계적으로 정리하는 과정
- 정규 형식 Normal form
    - 정규적인, 즉, “규정에 맞고 정상”인 형식
- 정규화 종류
    - 1NF The first normal form 제1 정규형
    - 2NF The second normal form 제2 정규형
    - 3NF The third normal form 제3 정규형
- 정규화 장점
    - 데이터 중복(redundancy) 제거
    - 데이터 무결성(integrity) 준수
    - 이상 현상(anomaly) 방지

### 제1정규형 테이블만들기
```
☑ 테이블 한 칸에는 하나의 값만
☑ 중복 로우, 컬럼 X
☑ Primary Key 필수
☑ 한 컬럼에는 같은 데이터 타입 사용
```
대여한 책에 2개의 값이 있음 → 하나만 반납시 문제가 생김

**Primary Key(PK, 기본키)가 있어야  한다.** 

**Primary Key: 테이블과 컬럼을 대표할 수 있는 값**
- 고유성
- 최소성


## 테이블 나누기
나서버가 나개발로 개명한다면? 로우갱신으로 인한 갱신 이상

회원ID로 회원정보를 연결(PK-FK)하면 문제가 해결된다.

정보손실도 없고 다시 테이블을 조립할 수 있는 상태를 **무손실분해**라고한다.

이때 회원ID와 책ID는 **Foreign Key(FK, 외래키)라고 한다.** 

**Foreign Key: 다른 테이블의 PK를 참조하는 키**

- 테이블을 나누는것도 정규화의 과정.
- 장점
    - **데이터 중복(redundancy) 제거**
    - **데이터 무결성(integrity) 준수**
    - **이상 현상(anomaly) 방지**

## 테이블 관계
ERD: 테이블간의 관계를 나타난 다이어그램

User의 user_id와 Rental의 user_id는 1:N관계

데이터베이스에서 **테이블 간의 관계**는 다음 세 가지 유형으로 나뉩니다.

### **일대일 관계 (1:1)**

- **설명:** A 테이블의 한 레코드는 B 테이블의 정확히 한 레코드와만 연결됨
- **예)**`User` ↔ `UserProfile`
    - 사용자 한 명당 하나의 프로필만 가짐
- **설계:** 보통 두 테이블 중 하나에 외래 키(FK)를 넣고, **UNIQUE 제약 조건**을 걸어 1:1을 보장함

### **일대다 관계 (1:N)**

- A 테이블의 한 레코드는 B 테이블의 여러 레코드와 연결될 수 있음
- **예)** `User` → `Post`
    - 한 사용자는 여러 개의 게시글을 작성할 수 있음
- **설계:** **다쪽(N)** 테이블이 외래 키(FK)를 갖고 있음
    - `Post` 테이블이 `user_id`를 외래 키로 가짐

### **다대다 관계 (N:N)**

- A 테이블의 여러 레코드가 B 테이블의 여러 레코드와 연결됨
- **예)** `Student` ↔ `Course`
    - 한 학생은 여러 수업을 듣고, 한 수업엔 여러 학생이 있음
- **설계:** **중간 테이블(조인 테이블)** 생성
    - 예) `Enrollment(student_id, course_id)`

    